<div *ngIf="!isLoading">
  <section class="content">
    <div class="row">
      <div class="col-7">
        <div class="row">
          <h3 class="page-header">
            <strong>Checkout</strong>
          </h3>
        </div>
        <section class="mt-4">
          <form [formGroup]="orderForm" novalidate>
            <h4 class="page-header">
              Delivery Details
            </h4>
            <div formGroupName="addressGroup">
              <div class="form-group">
                <input type="text"
                       class="form-control"
                       formControlName="streetAddress"
                       id="address"
                       placeholder="Street Address"
                       maxlength="150"
                       autocomplete="off"
                       [ngClass]="{ 'is-invalid': orderForm.controls.addressGroup.controls.streetAddress.invalid && ( orderForm.controls.addressGroup.controls.streetAddress.dirty ||  orderForm.controls.addressGroup.controls.streetAddress.touched) }">
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">

                  <input type="text"
                         class="form-control"
                         id="complement"
                         formControlName="complement"
                         placeholder="Apartment, suite, floor, etc."
                         autocomplete="off"
                         [ngClass]="{ 'is-invalid': orderForm.controls.addressGroup.controls.complement.invalid && ( orderForm.controls.addressGroup.controls.complement.dirty ||  orderForm.controls.addressGroup.controls.complement.touched) }">
                </div>
                <div class="form-group col-md-6">
                  <input type="text"
                         class="form-control"
                         id="postalCode"
                         formControlName="postalCode"
                         placeholder="Zip/Postal Code"
                         autocomplete="off"
                         [ngClass]="{ 'is-invalid': orderForm.controls.addressGroup.controls.postalCode.invalid && ( orderForm.controls.addressGroup.controls.postalCode.dirty ||  orderForm.controls.addressGroup.controls.postalCode.touched) }"
                  >
                </div>
              </div>
            </div>
            <div formGroupName="paymentGroup">
              <div class="row">
                <div class="col-sm-6 col-xs-12">
                  <h4 class="page-header">
                    Payment
                  </h4>
                  <div class="form-group">
                    <select class="form-select" formControlName="paymentId" id="paymentId"
                            aria-label="select example">
                      <!--                          [ngClass]="{ 'is-invalid': orderForm.controls.paymentGroup.controls.paymentId.invalid && (orderForm.controls.paymentGroup.controls.paymentId.touched) }"
                      -->
                      <option value="">Select...</option>
                      <option *ngFor="let payment of paymentMethods" value="{{payment.id}}">{{payment.name}}</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </form>
          <div class="row">
            <div class="col-xs-12">
              <button (click)="checkOrder()" class="btn btn-success pull-right"
                      [disabled]="!orderForm.valid || cartItems().length === 0"><em class="fa fa-credit-card"></em>
                Finish
                Order
              </button>
            </div>
          </div>
        </section>
      </div>

      <div class="col-5">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <h6 class="card-title text-muted flex-row">Your order in</h6>
            </div>
            <h4 class="ml-2 mb-4 "><strong>{{restaurant.name}}</strong></h4>
            <div class="row justify-content-center">
              <app-order-items [items]="cartItems()" (increaseQty)="increaseQty($event)"
                               (decreaseQty)="decreaseQty($event)"
                               (remove)="remove($event)"></app-order-items>
            </div>
            <div class="col-lg-12">
              <app-order-delivery-costs [deliveryFee]="restaurant.deliveryFee"
                                        [subtotal]="itemsValue()"></app-order-delivery-costs>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>
</div>
